<!DOCTYPE html>
<html xmlns:th="http://www.thymeLeaf.org">

<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0,shrink-to-fit=no">
	<meta charset="utf-8" />
	<title>EventManager Registration - National Yogasana Sports
		Federation</title>
	<link rel="stylesheet" type="text/css" th:href="@{/css/bootstrap.min.css}" />
	<link rel="stylesheet" type="text/css" th:href="@{/css/style.css}" />
	<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet">

</head>


<body>

	<div id="layoutAuthentication">
	<div th:replace="fragments/layout :: page_header_outside_application"></div>
		<div id="layoutAuthentication_content">
			<main>
				<div class="container">
					<div class="row justify-content-center mt-5 mb-5">
						<div class="col-lg-10">
							<div class="card shadow-lg border-0 rounded-lg">
								<div class="card-header dark-card-header">
									<h3 class="text-center font-weight-light my-4">EventManager
										Registration</h3>
								</div>
								<div class="card-body">
									<div></div>
									<div th:if="${message != null}"
										class="alert alert-success alert-dismissible fade show text-center"
										role="alert">
										[[${message}]]
										<button type="button" class="close" data-dismiss="alert" aria-label="Close">
											<span aria-hidden="true">&times;</span>
										</button>
									</div>

									<div th:if="${message1 != null}" class="alert alert-danger text-center">
										[[${message1}]]
										<button type="button" class="close" data-dismiss="alert" aria-label="Close">
											<span aria-hidden="true">&times;</span>
										</button>
									</div>


									<form id="form1" th:action="@{/manage-registration/register/eventmanager/save}"
										method="post" th:object="${eventManagerRegistration}"
										enctype="multipart/form-data"
										onsubmit="return (validateForm(this) && checkEmailUnique(this));">
										<input type="hidden" th:field="*{id}" id="id" />
										<div
											class="form-group d-flex align-items-center justify-content-between mt-3 mb-0">

											<div class="col-md-6 mb-3">
												<label class="form-label" for="firstName">First name
													<span class="form-star">*</span>
												</label> <input type="text" class="form-control" id="first-name"
													th:field="*{firstName}" minlength="2" maxlength="40" onkeypress='return ((event.charCode >= 65 && event.charCode <= 90) || 
												(event.charCode >= 97 && event.charCode <= 122) || (event.charCode == 32))'><span
													id="span-error-first-name" class="span-error"> </span>
											</div>
											<div class="col-md-6 mb-3">
												<label class="form-label" for="lastName">Last name <span
														class="form-star">*</span></label> <input type="text"
													id="last-name" class="form-control" th:field="*{lastName}"
													minlength="2" maxlength="40" onkeypress='return ((event.charCode >= 65 && event.charCode <= 90) || 
												(event.charCode >= 97 && event.charCode <= 122) || (event.charCode == 32))'> <span
													id="span-error-last-name" class="span-error"> </span>
											</div>
										</div>
										<div class=" d-flex align-items-center justify-content-between mt-2 mb-0">
											<!-- <div class="col-md-6 mb-3">
											<label class="form-label" for="gender">Gender <span
												class="form-star">*</span></label> <select class="form-control"
												id="gender" th:field="*{gender}">
												<option value="">-- Select --</option>
												<option value="Male">Male</option>
												<option value="Female">Female</option>
											</select> <span id="span-error-gender" class="span-error"> </span>
										</div>  -->
											<div class="col-md-6 mb-3">
												<label class="form-label" for="email">Email <span
														class="form-star">*</span></label> <input type="text" id="email"
													name="email" class="form-control" th:field="*{email}"
													maxlength="65">
												<span id="span-error-email" class="span-error"> </span>
											</div>

											<div class="col-md-6 mb-3">
												<label class="form-label" for="phoneNumber"> Mobile
													Number <span class="form-star">*</span>
												</label> <input type="text" class="form-control" id="phone-number"
													th:field="*{phoneNumber}"> <span id="span-error-phone-number"
													class="span-error"> </span>
											</div>
										</div>



										<!-- 		<div
										class="d-flex align-items-center justify-content-between mt-2 mb-0 ">
										
										<div class="col-md-6 mb-3">
											<label class="form-label" for="lastName">Designation
												<span class="form-star">*</span>
											</label> <input type="text" id="designation" class="form-control"
												th:field="*{designation}"> <span
												id="span-error-designation" class="span-error"> </span>
										</div>

									</div>

									<div class="col-12">
										<h5>Address</h5>
										<label class="form-label">Please provide Full address

										</label>
									</div>

									<div
										class=" d-flex align-items-center justify-content-between mt-2 mb-0">
										<div class="col-md-6 mb-3">
											<label class="form-label" for="addressLine1">Address
												Line 1 <span class="form-star">*</span>
											</label> <input type="text" class="form-control" id="address-line1"
												th:field="*{addressLine1}"><span
												id="span-error-address-line1" class="span-error"> </span>
										</div>
										<div class="col-md-6 mb-3">
											<label class="form-label" for="addressLine2">Address
												Line 2 </label> <input type="text" class="form-control"
												th:field="*{addressLine2}">
										</div>
									</div>  -->

										<div class=" d-flex align-items-center justify-content-between mt-2 mb-0">
											<!-- 	<div class="col-md-6 mb-3">
											<label class="form-label" for="town">Town <span
												class="form-star">*</span></label> <input type="text"
												class="form-control" id="town" th:field="*{town}"> <span
												id="span-error-town" class="span-error"> </span>
										</div>  -->
											<div class="col-md-6 mb-3">
												<label class="form-label" for="state">State <span
														class="form-star">*</span></label> <select class="form-control"
													id="state" th:field="*{state}" onchange="getDistrict(this);">
													<option value="">Select</option>
													<th:block th:each="state : ${listStates}">
														<option th:value="${state.id}">[[${state.name}]]</option>
													</th:block>
												</select> <span id="span-error-state" class="span-error"></span>
											</div>


											<div class="col-md-6 mb-3">

												<label class="form-label" for="district">District <span
														class="form-star">*</span></label>
												<th:block th:if="${eventManagerRegistration.getId() == null}">

													<select class="form-control" id="district" th:field="*{district}">
														<option value="">Select</option>
													</select>

													<span id="span-error-district" class="span-error"></span>
												</th:block>
												<th:block th:if="${eventManagerRegistration.getId() != null}">
													<select class="form-control" id="district" th:field="*{district}">
														<option th:value="${eventManagerRegistration.district.id}">
															[[${eventManagerRegistration.district.name}]]</option>
													</select>
												</th:block>


											</div>
										</div>



										<!-- 	<div
										class=" d-flex align-items-center justify-content-between mt-2 mb-0">
										

										<div class="col-md-6 mb-3">
											<label class="form-label" for="postalCode">Postal
												Code <span class="form-star">*</span>
											</label> <input type="text" class="form-control" id="postal-code"
												th:field="*{postalCode}"> <span
												id="span-error-postal-code" class="span-error"> </span>
										</div>
									</div>  -->
										<div class=" d-flex align-items-center justify-content-between mt-2 mb-0">
											<div class="col-md-6 mb-3">
												<label class="form-label" for="image">Please attach
													your passport size latest photograph below 1MB (Size of
													photo: 3.5 x 4.5 cm) <span class="form-star">*</span>
												</label> <input type="hidden" th:field="*{image}" /> <input type="file"
													id="eventmanagerImage" name="eventmanagerImage"
													accept="image/png,image/jpeg" class="mb-2" /><span
													id="span-error-eventmanager-image" class="span-error"> </span>
											</div>

										</div>



										<div class="d-flex align-items-center justify-content-between mt-2 mb-0 ">
											<div class="col-md-12 mb-3">
												<label class="form-label " for="acceptRules">I have
													read all the Rules and Regulation of National Yogasana Sport
													Federation. I accept it. <span class="form-star">*</span>
												</label>
												<div class="checkbox">
													<input type="checkbox" th:field="*{acceptRules}" id="accept-rules">
													<label class="label">
														&nbsp; Accept Rules</label> <span id="span-error-accept-rules"
														class="span-error"> </span>
												</div>
											</div>
										</div>

										<!-- 	<div class="form-group">
										<div class="g-recaptcha" id="g-recaptcha"
											data-sitekey="6Lcc4vQcAAAAAF9jYUwh7a5flUjMku475xE832-7">
										</div>
										<span id="span-error-recaptcha" class="span-error"> </span>
									</div>  -->

										<div class="d-flex align-items-center justify-content-between mt-3 mb-3">
											<div class="col-md-12 mb-3 text-center">
												<input type="submit" value="Submit" class="btn btn-primary" />
												<a th:href="@{/login}" type="button" class="btn btn-primary-outline"
													id="buttonCancel">Cancel</a>
											</div>
										</div>
									</form>
								</div>

							</div>
						</div>
					</div>
				</div>
			</main>


			<div id="layoutAuthentication_footer">
				<!-- Footer fragment -->
				<div th:replace="fragments/layout :: page_footer_outside_application"></div>
			</div>
		</div>
		<!-- Modal fragment to display warnings -->
		<div th:replace="fragments/modal_fragments :: warning_modal"></div>
		<!-- Modal fragment to display email warnings -->
		<div th:replace="fragments/modal_fragments :: email_warning_modal"></div>

		<script src='https://www.google.com/recaptcha/api.js'></script>
		<script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"
			crossorigin="anonymous"></script>
		<script type="text/javascript" th:src="@{/js/scripts.js}"></script>
		<script th:src="@{/js/district_scripts.js}"></script>



		<script type="text/javascript">
			var base_url = "[[@{/}]]";
			var checkEmailUrl = "[[@{/user/check_email}]]";
			var MAX_FILE_SIZE = 1000000;//1MB
			var reg = /^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;
			var mailformat = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
			function checkEmailUnique(form) {
				checkEmailUrl = "[[@{/user/check_email}]]";
				eventmanagerId = $("#id").val();
				eventmanagerEmail = $("#email").val();
				csrfValue = $("input[name='_csrf']").val();

				params = {
					id: eventmanagerId,
					email: eventmanagerEmail,
					_csrf: csrfValue
				};

				$
					.post(
						checkEmailUrl,
						params,
						function (response) {

							if (response == "OK") {
								form.submit();
							} else if (response == "Duplicated") {

								showEmailWarningModal(eventmanagerEmail);

								return false;
							} else {
								showErrorModal("Unknown error from the server");
								return false;
							}
						}).fail(function () {
							showErrorModal("Could not connect to the server");
						});

				return false;
			}

			/*	function checkDate() {
					var selectedDate = document.getElementById('date-of-birth').value;
					var now = new Date().toISOString().slice(0, 10);
					var dt1 = Date.parse(now), dt2 = Date.parse(selectedDate);
					//     if (dt1 <= dt2) {
					//          $("#span-error-date").text("Date must not be in the future");
					if (dt1 > dt2) {
						//	$("#span-error-date").text("Date must not be in the future");
						response = "OK";
					//	form.submit();
						return true;
	
					} else {
						//		 $("#span-error-date").text("Date must not be in the future");
						response = "Invalid Date";
						showWarningModal("Date should not be in the future");
						return false;
					}
				} */

			function validateForm(form) {
				let id = document.getElementById('id').value;
				let eventmanagerImage = document.getElementById('eventmanagerImage').value;
				//let category = document.getElementById('category').value;
				//let asanaCategory = document.getElementById('asana-category').value;

				//let gender = document.getElementById('gender').value;
				let district = document.getElementById('district').value;
				var phonePattern = reg
					.exec(document.getElementById('phone-number').value);
				var emailPattern = mailformat
					.exec(document.getElementById('email').value);

				if ((document.getElementById('first-name').value) == "") {
					var flagFirstName = false;
					$("#span-error-first-name").text("Enter the first name");

				} else {
					flagFirstName = true;
					$("#span-error-first-name").text("");
				}

				if ((document.getElementById('last-name').value) == "") {
					var flagLastName = false;
					$("#span-error-last-name").text("Enter the last name");

				} else {
					flagLastName = true;
					$("#span-error-last-name").text("");
				}

				if (!emailPattern) {
					var flagEmail = false;
					$("#span-error-email").text("Enter the valid email address");

				} else {
					flagEmail = true;
					$("#span-error-email").text("");
				}

				/*		if ((document.getElementById('category').value)=="") {
							var flagCategory = false;
							$("#span-error-age").text("Select the category");
	
						} else {
							flagCategory = true;
							$("#span-error-age").text("");
						}
				 */

				/*if (gender == "") {
					var flagGender = false;
					$("#span-error-gender").text("Select the gender");
	
				} else {
					flagGender = true;
					$("#span-error-gender").text("");
				} */

				if (!phonePattern) {
					var flagPhoneNum = false;
					$("#span-error-phone-number").text("Enter 10 digits pattern");

				} else {
					flagPhoneNum = true;
					$("#span-error-phone-number").text("");
				}

				/*	if ((document.getElementById('designation').value) == "") {
					var flagFirstName = false;
					$("#span-error-designation").text("Enter the designation");
	
				} else {
					flagDesignation = true;
					$("#span-error-designation").text("");
				}
	
				if ((document.getElementById('address-line1').value) == "") {
					var flagAddressLine1 = false;
					$("#span-error-address-line1").text("Enter Address");
	
				} else {
					flagAddressLine1 = true;
					$("#span-error-address-line1").text("");
				}
	
				if ((document.getElementById('town').value) == "") {
					var flagTown = false;
					$("#span-error-town").text("Enter the Town");
	
				} else {
					flagTown = true;
					$("#span-error-town").text("");
				} */

				if (district == "") {
					var flagDistrict = false;
					$("#span-error-district").text("Enter the District");

				} else {
					flagDistrict = true;
					$("#span-error-district").text("");
				}

				if ((document.getElementById('state').value) == "") {
					var flagState = false;
					$("#span-error-state").text("Select the state");

				} else {
					flagState = true;
					$("#span-error-state").text("");
				}

				/*if ((document.getElementById('postal-code').value) == "") {
					var flagPostalCode = false;
					$("#span-error-postal-code").text("Enter the Postal Code");
	
				} else {
					flagPostalCode = true;
					$("#span-error-postal-code").text("");
				} */


				if (id == "" && eventmanagerImage == "") {
					var flagEventmanagerImage = false;
					$('#span-error-eventmanager-image').text("Please upload the image");

				} else {
					flagEventmanagerImage = true;
					$("#span-error-eventmanager-image").text("");
				}

				if ((document.getElementById('accept-rules').checked) == false) {
					var flagAcceptRules = false;
					$("#span-error-accept-rules").text("Please check accept rules");

				} else {
					flagAcceptRules = true;
					$("#span-error-accept-rules").text("");
				}

				/*	if (grecaptcha.getResponse() == "") {
						var flagRecaptcha = false;
						$("#span-error-recaptcha").text("Please check the recaptcha");
		
					} else {
						flagRecaptcha = true;
						$("#span-error-recaptcha").text("");
					} */

				/* return (flagFirstName && flagLastName && flagEmail && flagDate
						&& flagPhoneNum && flagDesignation && flagAddressLine1
						&& flagTown && flagDistrict && flagState && flagPostalCode
						&& flagEventmanagerImage && flagAcceptRules && flagRecaptcha); */

				return (flagFirstName && flagLastName && flagEmail
					&& flagPhoneNum && flagDistrict && flagState
					&& flagEventmanagerImage && flagAcceptRules);

			}
		</script>


</body>

</html>